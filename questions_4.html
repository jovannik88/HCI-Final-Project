<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Questions</title>
    <link rel="stylesheet" href="questions.css"/>
</head>
<body>
    <header id="topbar">
        <div id="branding">
            Fluent Nusantara
        </div>
        <div id="title">
            Intermediate
        </div>
    </header>

    <!-- This is the questions. I store all of the questions and answers here -->
    <!-- Four options, with: 0, 1, 2, and 3, representing option A, B, C, and D -->
    <main id="QA">
        <section class="question">
            <p class = "num"></p>
            <p>Bob</p>
            <button class="choice_0">
                Is Bob
            </button>
            <button class="choice_1">
                Is not Bob
            </button>
            <button class="choice_2">
                Maybe Bob
            </button>
            <button class="choice_3">
                Bobbert
            </button>
        </section>

        <section class="question">
            <p class = "num"></p>
            <p>Billy</p>
            <button class="choice_0">
                Is not Billy
            </button>
            <button class="choice_1">
                Is Billy
            </button>
            <button class="choice_2">
                Billyard
            </button>
            <button class="choice_3">
                Maybe Billy
            </button>
        </section>

        <section class="question">
            <p class = "num"></p>
            <p>Bruce</p>
            <button class="choice_0">
                Is not Billy
            </button>
            <button class="choice_1">
                Is Billy
            </button>
            <button class="choice_2">
                Billyard
            </button>
            <button class="choice_3">
                Maybe Billy
            </button>
        </section>

        <section class="question">
            <p class = "num"></p>
            <p>Which sentence is grammatically correct?</p>
            <button class="choice_0">
                The forks are great in quantity
            </button>
            <button class="choice_1">
                The toaster are broken
            </button>
            <button class="choice_2">
                The board is clean when i last saw it
            </button>
            <button class="choice_3">
                Maybe you should think about those answer twice
            </button>
        </section>

        <section class="question">
            <p class = "num"></p>
            <p>Choose the correct word to complete the following passage:</p>
            <p>Billy Bob .... park his car there</p>
            <button class="choice_0">
                did not
            </button>
            <button class="choice_1">
                should have
            </button>
            <button class="choice_2">
                forgot that he
            </button>
            <button class="choice_3">
                will
            </button>
        </section>
    </main>

    <!-- This helps show how much progress you've made while also being a line that separates the buttons from questions -->
    <div id="lineofprogress">
        <div id="progress"></div>
    </div>

    <!-- Buttons to go back and forth between questions -->
    <nav id="controls">
        <button id="back">
            Back
        </button>
        <button id="next">
            Next
        </button>
    </nav>

    <!-- My JS code -->
    <script>
        // Store all the questions
        const questions = document.querySelectorAll(".question")

        // Store all the correct answers (0, 1, 2, or 3)
        const answers = [0, 1, 0, 0, 3]

        // Store all the picked answers
        let chosen_answer = new Array(questions.length).fill(null)

        // Keep track of which number you're on
        let current_number = 0

        // This is basically to figure out what answer you choose, and it updates after you choose something new, and even highlights you choice
        function whatDidIChoose(option, choice){
            option.onclick = function(){
                chosen_answer[current_number] = choice

                const options = questions[current_number].querySelectorAll("button")
                for (let i = 0; i < options.length; i++){
                    options[i].classList.remove("selected")
                }
                option.classList.add("selected")
            }
        }

        // This just calls the above function
        function abilityToChoose(option, choice){
            document.querySelectorAll("." + option).forEach(function(i){
                whatDidIChoose(i, choice)
            })
        }

        // This activates the function above
        abilityToChoose("choice_0", 0);
        abilityToChoose("choice_1", 1);
        abilityToChoose("choice_2", 2);
        abilityToChoose("choice_3", 3);
        
        // Keeps track of progress for the progress bar
        function whatIsMyProgress(){
            progress = (100 / (questions.length - 1)) * (current_number)
            document.getElementById("progress").style.width = progress + "%"
        }

        // The main code that hides all questions and only shows the one you're in
        function whatNumberAmI(current_number){
            for (let i = 0; i < questions.length; i++){
                questions[i].style.display = "none";
            }
            questions[current_number].style.display = "block"

            questions[current_number].querySelector(".num").textContent = (current_number + 1) + "."

            if (current_number == 0){
                document.getElementById("back").classList.add("greyedout")
            }
            else{
                document.getElementById("back").classList.remove("greyedout")
            }

            if (current_number == questions.length - 1){
                document.getElementById("next").textContent = "Submit"
            }
            else{
                document.getElementById("next").textContent = "Next"
            }

            whatIsMyProgress()
        }

        // For once you're done. RN it's very basic
        function submit(){
            let score = 0
            for (let i = 0; i < questions.length; i++){
                if (chosen_answer[i] == answers[i]){
                    score ++
                }
            }
            grade = score + "/" + questions.length
            alert("Quiz submitted!\n" + "Score is: " + grade)

            // Returns to dashboard or some other page
            window.location.replace("Course Page.html")
        }

        // Figures out when to allow next or when to submit, also allow you to move forward
        document.getElementById("next").onclick = function(){
            if (current_number < questions.length - 1){
                current_number ++
                whatNumberAmI(current_number)
            }
            else{
                submit();
            }
        }

        // Allow you to move back
        document.getElementById("back").onclick = function(){
            if (current_number > 0){
                current_number --
                whatNumberAmI(current_number)
            }
        }

        //Set the first question up
        whatNumberAmI(current_number)
    </script>
</body>
</html>

<!--
1. Future Features:
- Confirm to submit
- A score popup instead of alert
- Option to return to dashboard or browse courses
- Actual questions and titles and whatnot after integration
- A yellow line in the progress bar to keep track of where you are
- Not allowing to progress without answering
- Not allowing to submit or at least confirming whether or not user wants to submit without answering all questions

2. Fixes:
- Clean up the JSCode
- Clean up the CSS
- HTML is pretty clean, but might want to combine some stuff for better organization

3. Design Philosopy:
- Feedback for when hovering over buttons
- Giving users agency by confirmation questions
- Simple layout that doesn't overload user with information
- Consistent color scheme
- Simple navigation
- Easy form input
- Organized content
- Easy to interpret

4. Important Notes:
- This code is duplicatable. If you have 5 courses, copy this code 5 times and make different questions for each.
-->